{"ast":null,"code":"import { V, c as computeRubberband } from './maths-0ab39ae9.esm.js';\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\n\nfunction hasCapture() {\n  let capture = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  let actionKey = arguments.length > 1 ? arguments[1] : undefined;\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\n\nfunction toHandlerProp(device) {\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  let capture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\n\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\n\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\n\nfunction toDomEventType(device) {\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\n\nfunction isTouch(event) {\n  return 'touches' in event;\n}\n\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  try {\n    const dx = P2.clientX - P1.clientX;\n    const dy = P2.clientY - P1.clientY;\n    const cx = (P2.clientX + P1.clientX) / 2;\n    const cy = (P2.clientY + P1.clientY) / 2;\n    const distance = Math.hypot(dx, dy);\n    const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n    const origin = [cx, cy];\n    return {\n      angle,\n      distance,\n      origin\n    };\n  } catch (_unused) {}\n\n  return null;\n}\n\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\n\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\n\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\n\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\n\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\n\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\n\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\n\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v) {\n  if (typeof v === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return v(...args);\n  } else {\n    return v;\n  }\n}\n\nfunction noop() {}\n\nfunction chain() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n\n    return result;\n  };\n}\n\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\n\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = state.timeDelta = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n      state.startTime = state.timeStamp = event.timeStamp;\n    }\n  }\n\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n\n      V.addTo(state._distance, _absoluteDelta);\n    }\n\n    if (this.axisIntent) this.axisIntent(event);\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n        state.timeDelta = dt;\n      }\n    }\n  }\n\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n\n}\n\nfunction selectAxis(_ref3, threshold) {\n  let [dx, dy] = _ref3;\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n\n  return undefined;\n}\n\nclass CoordinatesEngine extends Engine {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n\n  axisIntent(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state.axis && event) {\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n      state.axis = selectAxis(state._movement, threshold);\n    }\n\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n  }\n\n  restrictToAxis(v) {\n    if (this.config.axis || this.config.lockDirection) {\n      switch (this.state.axis) {\n        case 'x':\n          v[1] = 0;\n          break;\n\n        case 'y':\n          v[0] = 0;\n          break;\n      }\n    }\n  }\n\n}\n\nconst identity = v => v;\n\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  },\n\n  eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n\n  preventDefault() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n\n  triggerAllEvents() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n\n  rubberband() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n\n        return r;\n      };\n    }\n\n    return transform || identity;\n  },\n\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n\n      return NaN;\n    },\n\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n\n      return NaN;\n    },\n\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nconst DEFAULT_AXIS_THRESHOLD = 0;\n\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, _ref4) {\n    let {\n      axis\n    } = _ref4;\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n\n  axisThreshold() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_AXIS_THRESHOLD;\n    return value;\n  },\n\n  bounds() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n\n    if ('current' in value) {\n      return () => value.current;\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n\n});\n\nconst KEYS_DELTA_MAP = {\n  ArrowRight: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [displacement * factor, 0];\n  },\n  ArrowLeft: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [-1 * displacement * factor, 0];\n  },\n  ArrowUp: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [0, -1 * displacement * factor];\n  },\n  ArrowDown: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [0, displacement * factor];\n  }\n};\n\nclass DragEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n\n  setup() {\n    const state = this.state;\n\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    const ctrlIds = this.ctrl.setEventIds(event);\n\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n\n      if (config.triggerAllEvents) {\n        this.compute(event);\n        this.emit();\n      }\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n\n    const _values = pointerValues(event);\n\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [_dx, _dy] = state._delta;\n      const [_mx, _my] = state._movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n\n      if (state.elapsedTime < sdt) {\n        const _vx = Math.abs(_dx / state.timeDelta);\n\n        const _vy = Math.abs(_dy / state.timeDelta);\n\n        if (_vx > svx && Math.abs(_mx) > sx) state.swipe[0] = Math.sign(_dx);\n        if (_vy > svy && Math.abs(_my) > sy) state.swipe[1] = Math.sign(_dy);\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerClick(event) {\n    if (!this.state.tap && event.detail > 0) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n\n  setupScrollPrevention(event) {\n    this.state._preventScroll = false;\n    persistEvent(event);\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      this.start(event);\n      state._delta = deltaFn(this.config.keyboardDisplacement, factor);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n\n    if (this.config.keys) {\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n    }\n\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n\n}\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: isTouchScreen(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst DEFAULT_KEYBOARD_DISPLACEMENT = 10;\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\n\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, _ref5) {\n    let {\n      pointer: {\n        touch = false,\n        lock = false,\n        mouse = false\n      } = {}\n    } = _ref5;\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n\n  preventScrollAxis(value, _k, _ref6) {\n    let {\n      preventScroll\n    } = _ref6;\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n\n  pointerCapture(_v, _k, _ref7) {\n    let {\n      pointer: {\n        capture = true,\n        buttons = 1,\n        keys = true\n      } = {}\n    } = _ref7;\n    this.pointerButtons = buttons;\n    this.keys = keys;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n\n  threshold(value, _k, _ref8) {\n    let {\n      filterTaps = false,\n      tapsThreshold = 3,\n      axis = undefined\n    } = _ref8;\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n\n  swipe() {\n    let {\n      velocity = DEFAULT_SWIPE_VELOCITY,\n      distance = DEFAULT_SWIPE_DISTANCE,\n      duration = DEFAULT_SWIPE_DURATION\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n\n  delay() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  },\n\n  axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  },\n\n  keyboardDisplacement() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_KEYBOARD_DISPLACEMENT;\n    return value;\n  }\n\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nfunction clampStateInternalMovementToBounds(state) {\n  const [ox, oy] = state.overflow;\n  const [dx, dy] = state._delta;\n  const [dirx, diry] = state._direction;\n\n  if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n    state._movement[0] = state._movementBound[0];\n  }\n\n  if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n    state._movement[1] = state._movementBound[1];\n  }\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\n\nclass PinchEngine extends Engine {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"ingKey\", 'pinching');\n\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n\n  axisIntent() {\n    const state = this.state;\n    const [_m0, _m1] = state._movement;\n\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n  }\n\n  restrictToAxis(v) {\n    if (this.config.lockDirection) {\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n\n    if (!state._active) return;\n\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  wheel(event) {\n    const modifierKey = this.config.modifierKey;\n    if (modifierKey && !event[modifierKey]) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n      bindFunction('lostPointerCapture', '', this[device + 'End'].bind(this));\n    }\n\n    if (this.config.pinchOnWheel) {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, _ref9) {\n    let {\n      shared,\n      pointer: {\n        touch = false\n      } = {}\n    } = _ref9;\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n\n  bounds(_v, _k, _ref10) {\n    let {\n      scaleBounds = {},\n      angleBounds = {}\n    } = _ref10;\n\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n\n  modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  },\n\n  pinchOnWheel() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function () {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function () {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\n\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\n\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };","map":{"version":3,"names":["V","c","computeRubberband","_toPrimitive","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","String","Number","_toPropertyKey","arg","key","_defineProperty","obj","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","EVENT_TYPE_MAP","pointer","start","change","end","mouse","touch","gesture","capitalize","string","toUpperCase","slice","actionsWithoutCaptureSupported","hasCapture","capture","actionKey","includes","toHandlerProp","device","action","deviceProps","pointerCaptureEvents","parseProp","prop","eventKey","substring","toLowerCase","passive","indexOf","replace","captureKey","toDomEventType","isTouch","event","getPointerType","pointerType","getCurrentTargetTouchList","Array","from","touches","e","_event$currentTarget","_event$currentTarget$","currentTarget","contains","getTouchList","type","changedTouches","targetTouches","getValueEvent","distanceAngle","P1","P2","dx","clientX","dy","clientY","cx","cy","distance","Math","hypot","angle","atan2","PI","origin","_unused","touchIds","map","identifier","touchDistanceAngle","ids","pointerId","valueEvent","pointerValues","LINE_HEIGHT","PAGE_HEIGHT","wheelValues","deltaX","deltaY","deltaMode","scrollValues","_ref","_ref2","scrollX","scrollY","scrollLeft","scrollTop","getEventDetails","payload","buttons","shiftKey","altKey","metaKey","ctrlKey","assign","v","args","noop","chain","fns","result","fn","assignDefault","fallback","BEFORE_LAST_KINEMATICS_DELAY","Engine","constructor","ctrl","state","computeValues","computeInitial","init","reset","shared","eventStore","gestureEventStores","timeoutStore","gestureTimeoutStores","config","sharedConfig","handler","handlers","ingKey","_active","active","_blocked","_force","_step","intentional","_movement","_distance","_direction","_delta","_bounds","Infinity","axis","memo","elapsedTime","timeDelta","direction","overflow","_movementBound","velocity","movement","delta","timeStamp","lastOffset","offset","startTime","values","_values","transform","_initial","initial","compute","dt","preventDefault","cancelable","pointerIds","size","locked","document","pointerLockElement","down","pressed","_absoluteDelta","abs","addTo","axisIntent","_m0","_m1","t0","t1","threshold","hasCustomTransform","sign","v0","v1","restrictToAxis","previousOffset","gestureIsActive","first","last","bounds","setup","computeOffset","ox","oy","x0","x1","y0","y1","rubberband","sub","computeMovement","absoluteDelta","emit","clean","triggerAllEvents","aliasKey","selectAxis","absDx","absDy","CoordinatesEngine","add","axisThreshold","lockDirection","identity","DEFAULT_RUBBERBAND","commonConfigResolver","enabled","eventOptions","_k","toVector","process","env","NODE_ENV","originalTransform","r","isFinite","console","warn","domTarget","Error","NaN","DEFAULT_AXIS_THRESHOLD","coordinatesConfigResolver","_v","current","HTMLElement","left","right","top","bottom","KEYS_DELTA_MAP","ArrowRight","displacement","factor","ArrowLeft","ArrowUp","ArrowDown","DragEngine","_pointerId","_pointerActive","_keyboardActive","_preventScroll","_delayed","swipe","tap","canceled","cancel","bind","boundRect","getBoundingClientRect","targetRect","setTimeout","setActive","pointerClean","pointerDown","isArray","pointerButtons","ctrlIds","setEventIds","pointerCapture","setPointerCapture","setupPointer","preventScrollAxis","setupScrollPrevention","delay","setupDelayTrigger","startPointerDrag","pointerMove","id","movementX","movementY","remove","pointerUp","hasPointerCapture","releasePointerCapture","tapsThreshold","filterTaps","_dx","_dy","_mx","_my","svx","svy","sx","sy","sdt","duration","_vx","_vy","pointerClick","detail","stopPropagation","preventScrollDelay","sourceEvent","style","window","getComputedStyle","touchAction","_unused2","pointerLock","requestPointerLock","exitPointerLock","preventScroll","persistEvent","keyDown","deltaFn","keyboardDisplacement","keyUp","bindFunction","persist","isBrowser","createElement","supportsTouchEvents","isTouchScreen","navigator","maxTouchPoints","supportsPointerEvents","supportsPointerLock","supportsGestureEvents","GestureEvent","SUPPORT","touchscreen","DEFAULT_PREVENT_SCROLL_DELAY","DEFAULT_DRAG_DELAY","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","DEFAULT_KEYBOARD_DISPLACEMENT","DEFAULT_DRAG_AXIS_THRESHOLD","pen","dragConfigResolver","lock","useTouch","experimental_preventWindowScrollY","swipeVelocity","swipeDistance","swipeDuration","clampStateInternalMovementToBounds","dirx","diry","SCALE_ANGLE_RATIO_INTENT_DEG","PINCH_WHEEL_RATIO","PinchEngine","_pointerEvents","Map","_touchIds","turns","axisMovementDifference","touchStart","ctrlTouchIds","every","has","pinchStart","pointerStart","ctrlPointerIds","set","touchMove","pinchMove","prev_a","delta_a","delta_turns","touchEnd","some","pointerEnd","delete","gestureStart","scale","rotation","gestureMove","_previousMovement","gestureEnd","wheel","modifierKey","wheelStart","wheelChange","wheelEnd","isR3f","defaultPrevented","pinchOnWheel","pinchConfigResolver","scaleBounds","angleBounds","_scaleBounds","D","min","max","_angleBounds","A","MoveEngine","move","mouseOnly","moveStart","moveChange","moveEnd","moveConfigResolver","ScrollEngine","scroll","scrollChange","scrollEnd","scrollConfigResolver","WheelEngine","wheelConfigResolver","HoverEngine","enter","leave","hoverConfigResolver","EngineMap","ConfigResolverMap","registerAction","engine","resolver","dragAction","hoverAction","moveAction","pinchAction","scrollAction","wheelAction","C","E","S","_","a","b","d","f","h","m","p","s","t","w"],"sources":["/Users/crushedsummers/Desktop/Work/Application/portfolio22/node_modules/@use-gesture/core/dist/actions-76b8683e.esm.js"],"sourcesContent":["import { V, c as computeRubberband } from './maths-0ab39ae9.esm.js';\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\nfunction hasCapture(capture = false, actionKey) {\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\nfunction distanceAngle(P1, P2) {\n  try {\n    const dx = P2.clientX - P1.clientX;\n    const dy = P2.clientY - P1.clientY;\n    const cx = (P2.clientX + P1.clientX) / 2;\n    const cy = (P2.clientY + P1.clientY) / 2;\n    const distance = Math.hypot(dx, dy);\n    const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n    const origin = [cx, cy];\n    return {\n      angle,\n      distance,\n      origin\n    };\n  } catch (_unused) {}\n  return null;\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = state.timeDelta = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n      state.startTime = state.timeStamp = event.timeStamp;\n    }\n  }\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n      V.addTo(state._distance, _absoluteDelta);\n    }\n    if (this.axisIntent) this.axisIntent(event);\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n        state.timeDelta = dt;\n      }\n    }\n  }\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n}\n\nfunction selectAxis([dx, dy], threshold) {\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n  return undefined;\n}\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n  axisIntent(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state.axis && event) {\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n      state.axis = selectAxis(state._movement, threshold);\n    }\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n  }\n  restrictToAxis(v) {\n    if (this.config.axis || this.config.lockDirection) {\n      switch (this.state.axis) {\n        case 'x':\n          v[1] = 0;\n          break;\n        case 'y':\n          v[0] = 0;\n          break;\n      }\n    }\n  }\n}\n\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n  eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n  preventDefault(value = false) {\n    return value;\n  },\n  triggerAllEvents(value = false) {\n    return value;\n  },\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n      case false:\n        return [0, 0];\n      default:\n        return V.toVector(value);\n    }\n  },\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n        return r;\n      };\n    }\n    return transform || identity;\n  },\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n};\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n      return NaN;\n    },\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n      return NaN;\n    },\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nconst DEFAULT_AXIS_THRESHOLD = 0;\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n  axisThreshold(value = DEFAULT_AXIS_THRESHOLD) {\n    return value;\n  },\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n    if ('current' in value) {\n      return () => value.current;\n    }\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n});\n\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (displacement, factor = 1) => [displacement * factor, 0],\n  ArrowLeft: (displacement, factor = 1) => [-1 * displacement * factor, 0],\n  ArrowUp: (displacement, factor = 1) => [0, -1 * displacement * factor],\n  ArrowDown: (displacement, factor = 1) => [0, displacement * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n  setup() {\n    const state = this.state;\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    const ctrlIds = this.ctrl.setEventIds(event);\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n      if (config.triggerAllEvents) {\n        this.compute(event);\n        this.emit();\n      }\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    const _values = pointerValues(event);\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n    this.emit();\n  }\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [_dx, _dy] = state._delta;\n      const [_mx, _my] = state._movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n      if (state.elapsedTime < sdt) {\n        const _vx = Math.abs(_dx / state.timeDelta);\n        const _vy = Math.abs(_dy / state.timeDelta);\n        if (_vx > svx && Math.abs(_mx) > sx) state.swipe[0] = Math.sign(_dx);\n        if (_vy > svy && Math.abs(_my) > sy) state.swipe[1] = Math.sign(_dy);\n      }\n    }\n    this.emit();\n  }\n  pointerClick(event) {\n    if (!this.state.tap && event.detail > 0) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n  setupScrollPrevention(event) {\n    this.state._preventScroll = false;\n    persistEvent(event);\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      this.start(event);\n      state._delta = deltaFn(this.config.keyboardDisplacement, factor);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n    if (this.config.keys) {\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n    }\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n}\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: isTouchScreen(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst DEFAULT_KEYBOARD_DISPLACEMENT = 10;\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, {\n    pointer: {\n      touch = false,\n      lock = false,\n      mouse = false\n    } = {}\n  }) {\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n  preventScrollAxis(value, _k, {\n    preventScroll\n  }) {\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1,\n      keys = true\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    this.keys = keys;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n  threshold(value, _k, {\n    filterTaps = false,\n    tapsThreshold = 3,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n      case false:\n        return 0;\n      default:\n        return value;\n    }\n  },\n  axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  },\n  keyboardDisplacement(value = DEFAULT_KEYBOARD_DISPLACEMENT) {\n    return value;\n  }\n});\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n      return NaN;\n    },\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n      return NaN;\n    },\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nfunction clampStateInternalMovementToBounds(state) {\n  const [ox, oy] = state.overflow;\n  const [dx, dy] = state._delta;\n  const [dirx, diry] = state._direction;\n  if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n    state._movement[0] = state._movementBound[0];\n  }\n  if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n    state._movement[1] = state._movementBound[1];\n  }\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'pinching');\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n  axisIntent() {\n    const state = this.state;\n    const [_m0, _m1] = state._movement;\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n  }\n  restrictToAxis(v) {\n    if (this.config.lockDirection) {\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n    if (!state._active) return;\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  wheel(event) {\n    const modifierKey = this.config.modifierKey;\n    if (modifierKey && !event[modifierKey]) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n      bindFunction('lostPointerCapture', '', this[device + 'End'].bind(this));\n    }\n    if (this.config.pinchOnWheel) {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, {\n    shared,\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n  modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  },\n  pinchOnWheel(value = true) {\n    return value;\n  }\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}