{"ast":null,"code":"import _slicedToArray from \"/Users/crushedsummers/Desktop/Work/Application/portfolio22/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/Users/crushedsummers/Desktop/Work/Application/portfolio22/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Users/crushedsummers/Desktop/Work/Application/portfolio22/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from 'react';\nimport create from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nvar context = /*@__PURE__*/React.createContext(null);\n\nfunction KeyboardControls(_ref) {\n  var map = _ref.map,\n      children = _ref.children,\n      onChange = _ref.onChange,\n      domElement = _ref.domElement;\n  var key = map.map(function (item) {\n    return item.name + item.keys;\n  }).join('-');\n  var useControls = React.useMemo(function () {\n    return create(subscribeWithSelector(function () {\n      return map.reduce(function (prev, cur) {\n        return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, cur.name, false));\n      }, {});\n    }));\n  }, [key]);\n  var api = React.useMemo(function () {\n    return [useControls.subscribe, useControls.getState, useControls];\n  }, [key]);\n  var set = useControls.setState;\n  React.useEffect(function () {\n    var config = map.map(function (_ref2) {\n      var name = _ref2.name,\n          keys = _ref2.keys,\n          up = _ref2.up;\n      return {\n        keys: keys,\n        up: up,\n        fn: function fn(value) {\n          // Set zustand state\n          set(_defineProperty({}, name, value)); // Inform callback\n\n          if (onChange) onChange(name, value, api[1]());\n        }\n      };\n    });\n    var keyMap = config.reduce(function (out, _ref3) {\n      var keys = _ref3.keys,\n          fn = _ref3.fn,\n          _ref3$up = _ref3.up,\n          up = _ref3$up === void 0 ? true : _ref3$up;\n      keys.forEach(function (key) {\n        return out[key] = {\n          fn: fn,\n          pressed: false,\n          up: up\n        };\n      });\n      return out;\n    }, {});\n\n    var downHandler = function downHandler(_ref4) {\n      var key = _ref4.key,\n          code = _ref4.code;\n      var obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      var fn = obj.fn,\n          pressed = obj.pressed,\n          up = obj.up;\n      obj.pressed = true;\n      if (up || !pressed) fn(true);\n    };\n\n    var upHandler = function upHandler(_ref5) {\n      var key = _ref5.key,\n          code = _ref5.code;\n      var obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      var fn = obj.fn,\n          up = obj.up;\n      obj.pressed = false;\n      if (up) fn(false);\n    };\n\n    var source = domElement || window;\n    source.addEventListener('keydown', downHandler, {\n      passive: true\n    });\n    source.addEventListener('keyup', upHandler, {\n      passive: true\n    });\n    return function () {\n      source.removeEventListener('keydown', downHandler);\n      source.removeEventListener('keyup', upHandler);\n    };\n  }, [domElement, key]);\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api,\n    children: children\n  });\n}\n\nfunction useKeyboardControls(sel) {\n  var _React$useContext = React.useContext(context),\n      _React$useContext2 = _slicedToArray(_React$useContext, 3),\n      sub = _React$useContext2[0],\n      get = _React$useContext2[1],\n      store = _React$useContext2[2];\n\n  if (sel) return store(sel);else return [sub, get];\n}\n\nexport { KeyboardControls, useKeyboardControls };","map":{"version":3,"names":["React","create","subscribeWithSelector","context","createContext","KeyboardControls","map","children","onChange","domElement","key","item","name","keys","join","useControls","useMemo","reduce","prev","cur","api","subscribe","getState","set","setState","useEffect","config","up","fn","value","keyMap","out","forEach","pressed","downHandler","code","obj","upHandler","source","window","addEventListener","passive","removeEventListener","createElement","Provider","useKeyboardControls","sel","useContext","sub","get","store"],"sources":["/Users/crushedsummers/Desktop/Work/Application/portfolio22/node_modules/@react-three/drei/web/KeyboardControls.js"],"sourcesContent":["import * as React from 'react';\nimport create from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\n\nconst context = /*@__PURE__*/React.createContext(null);\nfunction KeyboardControls({\n  map,\n  children,\n  onChange,\n  domElement\n}) {\n  const key = map.map(item => item.name + item.keys).join('-');\n  const useControls = React.useMemo(() => {\n    return create(subscribeWithSelector(() => map.reduce((prev, cur) => ({ ...prev,\n      [cur.name]: false\n    }), {})));\n  }, [key]);\n  const api = React.useMemo(() => [useControls.subscribe, useControls.getState, useControls], [key]);\n  const set = useControls.setState;\n  React.useEffect(() => {\n    const config = map.map(({\n      name,\n      keys,\n      up\n    }) => ({\n      keys,\n      up,\n      fn: value => {\n        // Set zustand state\n        set({\n          [name]: value\n        }); // Inform callback\n\n        if (onChange) onChange(name, value, api[1]());\n      }\n    }));\n    const keyMap = config.reduce((out, {\n      keys,\n      fn,\n      up = true\n    }) => {\n      keys.forEach(key => out[key] = {\n        fn,\n        pressed: false,\n        up\n      });\n      return out;\n    }, {});\n\n    const downHandler = ({\n      key,\n      code\n    }) => {\n      const obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      const {\n        fn,\n        pressed,\n        up\n      } = obj;\n      obj.pressed = true;\n      if (up || !pressed) fn(true);\n    };\n\n    const upHandler = ({\n      key,\n      code\n    }) => {\n      const obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      const {\n        fn,\n        up\n      } = obj;\n      obj.pressed = false;\n      if (up) fn(false);\n    };\n\n    const source = domElement || window;\n    source.addEventListener('keydown', downHandler, {\n      passive: true\n    });\n    source.addEventListener('keyup', upHandler, {\n      passive: true\n    });\n    return () => {\n      source.removeEventListener('keydown', downHandler);\n      source.removeEventListener('keyup', upHandler);\n    };\n  }, [domElement, key]);\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api,\n    children: children\n  });\n}\nfunction useKeyboardControls(sel) {\n  const [sub, get, store] = React.useContext(context);\n  if (sel) return store(sel);else return [sub, get];\n}\n\nexport { KeyboardControls, useKeyboardControls };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}